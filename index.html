<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thi Tr·∫Øc Nghi·ªám Online - V·∫≠t l√Ω Y Sinh</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Trang ch·ªß -->
        <div class="home-screen active">
            <h1>üéì Thi Tr·∫Øc Nghi·ªám Online</h1>
            
            <div class="format-info">
                <div class="format-header">
                    <h3>üìã ƒê·ªãnh d·∫°ng file JSON (ƒê√£ n√¢ng c·∫•p):</h3>
                    <button class="copy-btn" onclick="app.copyJsonFormat(event)">üìã Copy</button>
                </div>
                <pre id="jsonFormat">{
  "questions": [
    {
      "id": "VL_2024_001",
      "topic": "C∆° h·ªçc",
      "question": "T√≠nh nƒÉng l∆∞·ª£ng: $E = mc^2$?",
      "answers": [
        "$3 \\times 10^8$ m/s",
        "$9 \\times 10^{16}$ J"
      ],
      "correct": 0,
      "explanation": "Theo thuy·∫øt t∆∞∆°ng ƒë·ªëi..."
    }
  ]
}</pre>
                <p style="margin-top: 10px; color: #666;">
                    <strong>L∆∞u √Ω:</strong> H·ªó tr·ª£ LaTeX (KaTeX), "correct" l√† ch·ªâ s·ªë ƒë√°p √°n ƒë√∫ng (b·∫Øt ƒë·∫ßu t·ª´ 0)
                </p>
            </div>
<div class="settings-section" style="background: #eef2ff; border: 2px solid #667eea;">
    <h3 style="color: #667eea; margin-bottom: 10px;">üöÄ So·∫°n ƒë·ªÅ nhanh (Smart Paste)</h3>
    <p style="font-size: 0.9em; color: #666; margin-bottom: 10px;">
        Copy c√¢u h·ªèi t·ª´ Word/Web v√† d√°n v√†o ƒë√¢y. ƒê√°nh d·∫•u <strong>*</strong> tr∆∞·ªõc ƒë√°p √°n ƒë√∫ng.
    </p>
    
    <textarea id="smartPasteInput" 
              placeholder="C√¢u 1: Th·ªß ƒë√¥ c·ªßa Vi·ªát Nam?
A. Hu·∫ø
*B. H√† N·ªôi
C. TP.HCM

C√¢u 2: 1 + 1 = ?
*A. 2
B. 3" 
              style="width: 100%; height: 150px; padding: 15px; border-radius: 10px; border: 1px solid #ccc; font-family: inherit; resize: vertical; margin-bottom: 15px;"></textarea>

    <div style="text-align: right;">
        <button class="btn" onclick="app.processSmartPaste()">‚ö° T·∫°o ƒë·ªÅ thi ngay</button>
    </div>
</div>
            <div class="file-upload" onclick="document.getElementById('fileInput').click()">
                <input type="file" id="fileInput" accept=".json">
                <label>
                    üìÅ Nh·∫•p ƒë·ªÉ ch·ªçn file c√¢u h·ªèi (JSON)<br>
                    <span id="fileName" style="font-size: 0.9em; color: #999;">Ch∆∞a ch·ªçn file</span>
                </label>
            </div>

            <!-- C√†i ƒë·∫∑t -->
            <div class="settings-section">
                <h3 style="color: #667eea; margin-bottom: 20px;">‚öôÔ∏è C√†i ƒë·∫∑t</h3>
                
                <div class="settings-row">
                    <span class="settings-label">üåô Ch·∫ø ƒë·ªô t·ªëi</span>
                    <div class="toggle-switch" id="darkModeToggle" onclick="app.toggleDarkMode()">
                        <div class="toggle-slider"></div>
                    </div>
                </div>

                <div class="settings-row">
                    <span class="settings-label">‚è±Ô∏è B·∫≠t ƒë·∫øm gi·ªù</span>
                    <div class="toggle-switch" id="timerToggle" onclick="app.toggleTimer()">
                        <div class="toggle-slider"></div>
                    </div>
                </div>

                <div class="settings-row">
                    <span class="settings-label">‚è∞ Th·ªùi gian (ph√∫t)</span>
                    <input type="number" class="time-input" id="timeLimit" value="30" min="1" max="180">
                </div>

                <div class="settings-row">
                    <span class="settings-label">üîÄ Tr·ªôn c√¢u h·ªèi</span>
                    <div class="toggle-switch" id="shuffleToggle" onclick="app.toggleShuffle()">
                        <div class="toggle-slider"></div>
                    </div>
                </div>

                <div class="settings-row">
                    <span class="settings-label">üéØ Tr·ªôn ƒë√°p √°n</span>
                    <div class="toggle-switch" id="shuffleAnswersToggle" onclick="app.toggleShuffleAnswers()">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
            </div>

            <!-- L·ªçc ch·ªß ƒë·ªÅ -->
            <div class="settings-section" style="margin-top: 20px;">
                <h3 style="color: #667eea; margin-bottom: 15px;">üéØ L·ªçc theo ch·ªß ƒë·ªÅ</h3>
                <select id="topicFilter" class="topic-select">
                    <option value="all">T·∫•t c·∫£ ch·ªß ƒë·ªÅ</option>
                </select>
                <div id="topicStats" style="margin-top: 10px; font-size: 0.9em; color: #666;"></div>
            </div>

            <!-- H∆∞·ªõng d·∫´n ph√≠m t·∫Øt -->
            <div class="settings-section" style="margin-top: 20px;">
                <h3 style="color: #667eea; margin-bottom: 15px;">‚å®Ô∏è Ph√≠m t·∫Øt</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; font-size: 0.9em;">
                    <div>‚óÄÔ∏è ‚ñ∂Ô∏è <span style="color: #666;">Di chuy·ªÉn c√¢u</span></div>
                    <div>üîº üîΩ <span style="color: #666;">Ch·ªçn ƒë√°p √°n</span></div>
                    <div>1-4 / A-D <span style="color: #666;">Ch·ªçn A/B/C/D</span></div>
                    <div>B <span style="color: #666;">Bookmark</span></div>
                    <div>Enter <span style="color: #666;">N·ªôp b√†i</span></div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <button class="btn" id="startBtn" disabled onclick="app.startQuiz()">B·∫Øt ƒë·∫ßu thi</button>
            </div>

            <!-- L·ªãch s·ª≠ -->
            <div class="history-section" id="historySection" style="display: none;">
                <h3 style="color: #667eea; margin-bottom: 20px;">üìö L·ªãch s·ª≠ l√†m b√†i</h3>
                <div class="filter-buttons" id="filterButtons"></div>
                <div id="historyContainer"></div>
                <div style="margin-top: 15px;">
                    <button class="clear-history-btn" onclick="app.clearHistory()">üóëÔ∏è X√≥a l·ªãch s·ª≠</button>
                    <button class="export-btn" onclick="app.exportHistory('csv')">üì• Xu·∫•t CSV</button>
                    <button class="export-btn" onclick="app.exportHistory('json')">üì• Xu·∫•t JSON</button>
                </div>
            </div>
        </div>

        <!-- M√†n h√¨nh l√†m b√†i -->
        <div class="quiz-screen">
            <h1>üìù L√†m b√†i thi</h1>
            
            <div class="stats-bar">
                <div class="stat-item">
                    <span class="stat-icon">üìä</span>
                    <span id="progressText">0/0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-icon">‚úÖ</span>
                    <span id="answeredCount">ƒê√£ tr·∫£ l·ªùi: 0</span>
                </div>
                <div class="stat-item" id="timerDisplay" style="display: none;">
                    <span class="stat-icon">‚è±Ô∏è</span>
                    <span id="timer"></span>
                </div>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>

            <details open style="margin-bottom: 20px;">
                <summary style="cursor: pointer; font-weight: bold; color: #667eea; margin-bottom: 10px;">
                    üó∫Ô∏è ƒêi·ªÅu h∆∞·ªõng c√¢u h·ªèi
                </summary>
                <div class="question-nav" id="questionNav"></div>
            </details>

            <div class="question-container">
                <div class="question-header">
                    <span class="question-number" id="questionNumber"></span>
                    <button class="bookmark-btn" id="bookmarkBtn" onclick="app.toggleBookmark()">‚òÜ</button>
                </div>
                <div class="question-text" id="questionText"></div>
                <div class="answers" id="answersContainer"></div>
            </div>

            <div class="navigation">
                <button class="btn" id="prevBtn" onclick="app.prevQuestion()">‚Üê C√¢u tr∆∞·ªõc</button>
                <button class="btn" id="nextBtn" onclick="app.nextQuestion()">C√¢u sau ‚Üí</button>
                <button class="btn" id="submitBtn" style="display: none;" onclick="app.submitQuiz()">N·ªôp b√†i</button>
            </div>
        </div>

        <!-- M√†n h√¨nh k·∫øt qu·∫£ -->
        <div class="result-screen">
            <h1>üéâ K·∫øt qu·∫£ thi</h1>
            
            <div class="score-card">
                <h2>ƒêi·ªÉm c·ªßa b·∫°n</h2>
                <div class="score-number" id="scoreDisplay"></div>
                <div id="scoreMessage"></div>
            </div>

            <div class="result-details">
                <div class="detail-card">
                    <div class="number" id="totalQuestions"></div>
                    <div class="label">T·ªïng c√¢u h·ªèi</div>
                </div>
                <div class="detail-card">
                    <div class="number" style="color: #10b981;" id="correctAnswers"></div>
                    <div class="label">C√¢u ƒë√∫ng</div>
                </div>
                <div class="detail-card">
                    <div class="number" style="color: #ef4444;" id="wrongAnswers"></div>
                    <div class="label">C√¢u sai</div>
                </div>
            </div>

            <div id="wrongAnswersSection"></div>

            <div class="action-buttons">
                <button class="btn" id="reviewBtn" onclick="app.reviewAnswers()">üëÅÔ∏è Xem l·∫°i ƒë√°p √°n</button>
                <button class="btn" id="retryWrongBtn" style="display: none;" onclick="app.retryWrong()">üîÑ L√†m l·∫°i c√¢u sai</button>
                <button class="btn" onclick="app.retryAll()">üìù L√†m l·∫°i to√†n b·ªô</button>
                <button class="btn" onclick="app.goHome()">üè† V·ªÅ trang ch·ªß</button>
            </div>
        </div>

        <!-- M√†n h√¨nh Review -->
        <div class="review-screen">
            <h1>üëÅÔ∏è Xem l·∫°i ƒë√°p √°n</h1>
            
            <div class="stats-bar">
                <div class="stat-item">
                    <span class="stat-icon">üìä</span>
                    <span id="reviewProgressText">0/0</span>
                </div>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="reviewProgressBar"></div>
            </div>

            <div class="question-nav" id="reviewQuestionNav"></div>

            <div class="question-container">
                <div class="question-header">
                    <span class="question-number" id="reviewQuestionNumber"></span>
                </div>
                <div class="question-text" id="reviewQuestionText"></div>
                <div class="answers" id="reviewAnswersContainer"></div>
                <div class="explanation" id="reviewExplanation" style="display: none;"></div>
            </div>

            <div class="navigation">
                <button class="btn" id="reviewPrevBtn" onclick="app.prevReviewQuestion()">‚Üê C√¢u tr∆∞·ªõc</button>
                <button class="btn" id="reviewNextBtn" onclick="app.nextReviewQuestion()">C√¢u sau ‚Üí</button>
                <button class="btn" onclick="app.exitReview()">ƒê√≥ng xem l·∫°i</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <script src="script.js"></script>
</body>
</html>